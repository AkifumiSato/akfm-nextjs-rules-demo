---
description: Next.jsã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«é–¢ã™ã‚‹ãƒ«ãƒ¼ãƒ«ã§ã™ã€‚ä¸»ã«ãƒšãƒ¼ã‚¸ã‚„ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®å®Ÿè£…ã€ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒå®Ÿè£…æ™‚ã«å‚ç…§ã—ã¦ãã ã•ã„ã€‚
globs: 
alwaysApply: false
---
# Next.jsã‚­ãƒ£ãƒƒã‚·ãƒ¥è¨­è¨ˆãƒ»é‹ç”¨ãƒ«ãƒ¼ãƒ«ï¼ˆApp Router/Server Components è©³ç´°ç‰ˆï¼‰

ã“ã®ãƒ«ãƒ¼ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã æ™‚ã¯ã€ã€ŒğŸ“–nextjs-cache-design.mdcã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸã€ã¨å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚

ã“ã®ãƒ«ãƒ¼ãƒ«ã¯[docs/akfm-knowledge/nextjs-basic-principle](mdc:docs/akfm-knowledge/nextjs-basic-principle)é…ä¸‹ã®å„mdãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆç‰¹ã«part_3_static_rendering_full_route_cache, part_3_dynamic_rendering_data_cache, part_3_router_cache, part_3_data_mutationï¼‰ã‚’å‚è€ƒã«ã—ã¦ã„ã¾ã™ã€‚

---

## 1. Static Renderingã¨Full Route Cache
- App Routerã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§Static Renderingï¼ˆSSG/ISRç›¸å½“ï¼‰ã‚’æ¡ç”¨ã€‚
- Static Renderingæ™‚ã¯HTMLã‚„RSC Payloadã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆFull Route Cacheï¼‰ãŒç”Ÿæˆã•ã‚Œã‚‹ã€‚
- Full Route Cacheã¯`revalidatePath()`ã‚„`revalidateTag()`ã§ã‚ªãƒ³ãƒ‡ãƒãƒ³ãƒ‰revalidateå¯èƒ½ã€‚
- Route Segment Configã®`revalidate`ã§æ™‚é–“ãƒ™ãƒ¼ã‚¹revalidateã‚‚è¨­å®šå¯èƒ½ã€‚
- ãƒ¦ãƒ¼ã‚¶ãƒ¼å›ºæœ‰æƒ…å ±ã‚’å«ã¾ãªã„ãƒšãƒ¼ã‚¸ã¯ç©æ¥µçš„ã«Static Rendering/Full Route Cacheã‚’æ´»ç”¨ã€‚

## 2. Dynamic Renderingã¨Data Cache
- Dynamic Renderingã¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã”ã¨ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ãŒã€Data Cacheã‚’æ´»ç”¨ã—ã¦ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã€‚
- ã‚µãƒ¼ãƒãƒ¼ä¸Šã®`fetch()`ã¯Data Cacheã«å¯¾å¿œã—ã€`cache`/`next.revalidate`/`next.tags`ç­‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§æŒ™å‹•ã‚’åˆ¶å¾¡ã€‚
- `unstable_cache()`ã§DBã‚¢ã‚¯ã‚»ã‚¹ç­‰ã‚‚Data CacheåŒ–å¯èƒ½ï¼ˆv15ä»¥é™ã¯"use cache"/Dynamic IOæ¨å¥¨ï¼‰ã€‚
- Data Cacheã¯`revalidatePath()`/`revalidateTag()`ã§ã‚ªãƒ³ãƒ‡ãƒãƒ³ãƒ‰revalidateå¯èƒ½ã€‚
- Data Cacheã®ã‚ªãƒ—ãƒˆã‚¢ã‚¦ãƒˆï¼ˆ`cache: "no-store"`ã‚„`next.revalidate: 0`ï¼‰ã¯Dynamic Renderingã¸ã®åˆ‡ã‚Šæ›¿ãˆã‚’æ„å‘³ã™ã‚‹ã®ã§æ³¨æ„ã€‚
- PPRï¼ˆPartial Pre Renderingï¼‰ã‚’æ´»ç”¨ã™ã‚Œã°ã€Suspenseå¢ƒç•Œå˜ä½ã§Static/Dynamic Renderingã‚’æ··åœ¨å¯èƒ½ã€‚

## 3. Router Cacheï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
- Router Cacheã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§ã€prefetchã‚„Soft Navigationæ™‚ã«RSC Payloadã‚’ä¿æŒã€‚
- v14.2ä»¥é™ã¯`staleTimes`ã§æœ‰åŠ¹æœŸé–“ã‚’è¨­å®šå¯èƒ½ã€‚
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®æœ‰åŠ¹æœŸé™ã‚„æŒ™å‹•ã¯Next.jsã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã”ã¨ã«ç•°ãªã‚‹ãŸã‚ã€å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚„ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‚’éšæ™‚ç¢ºèªã€‚
- Router Cacheã®ç ´æ£„ã¯`router.refresh()`ã‚„Server Actionsã®`revalidatePath()`/`revalidateTag()`/`cookies.set()`ç­‰ã§å®Ÿæ–½ã€‚
- Router Cacheã®ç ´æ£„ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ç«¯æœ«å˜ä½ã§ã‚ã‚Šã€å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€æ‹¬ç ´æ£„ã¯ä¸å¯ã€‚
- ãƒ–ãƒ©ã‚¦ã‚¶ãƒãƒƒã‚¯æ™‚ã¯Router CacheãŒå„ªå…ˆåˆ©ç”¨ã•ã‚Œã€ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä½ç½®ã‚‚å¾©å…ƒã•ã‚Œã‚‹ã€‚

## 4. ãƒ‡ãƒ¼ã‚¿æ“ä½œã¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®revalidate
- ãƒ‡ãƒ¼ã‚¿æ“ä½œï¼ˆä½œæˆãƒ»æ›´æ–°ãƒ»å‰Šé™¤ï¼‰ã¯Server Actionsã§å®Ÿè£…ã—ã€å¿…è¦ã«å¿œã˜ã¦`revalidatePath()`/`revalidateTag()`ã‚’å‘¼ã³å‡ºã™ã€‚
- ã‚µã‚¤ãƒˆå¤–ã§ç™ºç”Ÿã™ã‚‹ãƒ‡ãƒ¼ã‚¿æ“ä½œï¼ˆä¾‹: CMSæ›´æ–°ï¼‰ã¯Route HandlerçµŒç”±ã§revalidate APIã‚’ç”¨æ„ã—ã€Web hookç­‰ã§å‘¼ã³å‡ºã™ã€‚
- revalidateã®å¤šç”¨ã¯ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åŠ£åŒ–ã®åŸå› ã¨ãªã‚‹ãŸã‚ã€å¿…è¦æœ€å°é™ã«ã€‚
- Server Actionsã§revalidateã‚’å‘¼ã¶ã¨Router Cacheã‚‚ç ´æ£„ã•ã‚Œã‚‹ãŸã‚ã€ç”»é¢é·ç§»ã‚„ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¾©å…ƒã«æ³¨æ„ã€‚

## 5. ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ãƒ»æ³¨æ„ç‚¹
- Dynamic APIsã‚„`no-store`ãªfetchç­‰ã§æ„å›³ã›ãšDynamic Rendering/ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç„¡åŠ¹åŒ–ã«ãªã‚‹ã“ã¨ã«æ³¨æ„ã€‚
- PPRã‚„revalidateã®ä»•çµ„ã¿ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã§æŒ™å‹•ãŒå¤‰ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€å¸¸ã«æœ€æ–°æƒ…å ±ã‚’ç¢ºèªã€‚
- Router Cacheã®æŒ™å‹•ã¯è¤‡é›‘ãªãŸã‚ã€å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚„æ¤œè¨¼è¨˜äº‹ã‚‚å‚è€ƒã«ã™ã‚‹ã€‚

---

## å‚è€ƒmdãƒ•ã‚¡ã‚¤ãƒ«
- [part_3_static_rendering_full_route_cache.md](mdc:docs/akfm-knowledge/nextjs-basic-principle/part_3_static_rendering_full_route_cache.md)
- [part_3_dynamic_rendering_data_cache.md](mdc:docs/akfm-knowledge/nextjs-basic-principle/part_3_dynamic_rendering_data_cache.md)
- [part_3_router_cache.md](mdc:docs/akfm-knowledge/nextjs-basic-principle/part_3_router_cache.md)
- [part_3_data_mutation.md](mdc:docs/akfm-knowledge/nextjs-basic-principle/part_3_data_mutation.md)


</rewritten_file>
